{"version":3,"sources":["all.js"],"names":["inputClick","document","querySelector","inputData","querySelectorAll","selectLocation","displayLocation","showdataLen","inputfrom","errerMessage","sideSeedata","inputinfoData","console","log","value","getUserInfo","e","preventDefault","data","area","description","group","id","imgUrl","name","price","rate","forEach","item","index","Number","errorDisplay","push","render","reset","showDataNum","textContent","length","showData","content","innerHTML","displaySelectionLocation","target","getdata","axios","get","then","response","error","pieChart","areaString","indexOf","areaObj","areaData","chart","c3","generate","bindto","columns","type","size","height","width","donut","title","constraints","ticketName","presence","message","ticketPictureUrl","url","schemes","location","ticketPrice","numericality","onlyInteger","greaterThan","notInteger","notGreaterThan","ticketNum","ticketRank","lessThanOrEqualTo","notLessThanOrEqualTo","ticketDisctipt","maximum","tooLong","errors","validate","classString","getAttribute","classStringArray","split","Object","keys","addEventListener"],"mappings":"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","file":"all.js","sourcesContent":["\n//DOM\nconst inputClick = document.querySelector('.inputClick');\nconst inputData = document.querySelectorAll('[data-input]');\nconst selectLocation = document.querySelector('.selectLocation');\nconst displayLocation = document.querySelector('.displayLocation');\nconst showdataLen = document.querySelector('.dataLen');\nconst inputfrom = document.querySelector('.inputfrom');\nconst errerMessage = document.querySelectorAll('form p');\n\n//全域變數\nlet sideSeedata = [];\nlet inputinfoData = [];\n\nconsole.log(inputData[6].value)\n//功能\n//取得資料後push進入inputinfoData\nfunction getUserInfo(e) {\n  e.preventDefault();\n  let data = {\n    area: \"\",\n    description: \"\",\n    group: 0,\n    id: 0,\n    imgUrl: \"\",\n    name: \"\",\n    price: 0,\n    rate: 0,\n  }\n\n  inputData.forEach((item, index) => {\n    switch (index) {\n      case 0:\n        data.name = item.value;\n        break\n      case 1:\n        data.imgUrl = item.value;\n        break\n      case 2:\n        data.area = item.value;\n        break\n      case 3:\n        data.price = Number(item.value);\n        break\n      case 4:\n        data.group = Number(item.value);\n        break\n      case 5:\n        data.rate = item.value\n        break\n      case 6:\n        data.description = item.value;\n        break\n    }\n\n  });\n  //顯示錯誤\n  errorDisplay()\n\n  //如果有錯誤訊息則不渲染畫面\n  if (errorDisplay()) {\n    console.log('error return')\n    return\n  }\n  else {\n    inputinfoData.push(data);\n    inputinfoData.forEach((item) => {\n      sideSeedata.push(item)\n    });\n    //渲染畫面\n    render(sideSeedata);\n    //重製表單\n    inputfrom.reset();\n  }\n\n}\nfunction showDataNum(data) {\n  showdataLen.textContent = `本次搜尋共${data.length}筆資料`\n}\nfunction showData(data) {\n  let content = '';\n  data.forEach(function (item) {\n    content += `<li class=\"card w1-100 justify-content-between w1-lg-45 w1-xl-28 bg-white\">\n    <div class=\"form_group\">\n    <div class=\"cradHeader h-180\">\n      <img src=\"${item.imgUrl}\" alt=\"picture\" class=\"border-radius-5\">\n    </div>\n    <div class=\"cardbody\">\n      <div class=\"text-primary pt-20 fs-24\">\n        <h2>${item.name}</h2>\n      </div>\n      <p class=\"text-five pt-16 border-top-primary-2 \">\n      ${item.description}\n      </p>\n    </div>\n    </div>\n    <div class=\"cardfooter d-flex align-items-center  text-primary\">\n      <p class=\" fs-16 \">剩下最後${item.group}組</p>\n      <p class=\"fs-16 ms-30\">NTD</p>\n      <sapn class=\"fs-32\">$${item.price}</sapn>\n    </div>\n    <div\n      class=\"w-84 h-44 border-right-radius-5 bg-primary text-white position-absoult top--10px d-flex align-items-center justify-content-center\">\n      <span class=\"fs-20\">${item.area}</span>\n    </div>\n    <div\n      class=\"w-40 h-32 border-right-radius-5 bg-secondary text-white position-absoult top-164px d-flex align-items-center justify-content-center\">\n      <span class=\"fs-16\">${item.rate}</span>\n    </div>\n  </li>`\n  });\n  displayLocation.innerHTML = content;\n}\n\nfunction displaySelectionLocation(e) {\n\n  let showData = [];\n  sideSeedata.forEach((item) => {\n    if (e.target.value === item.area) {\n      showData.push(item)\n    }\n    else if (e.target.value === '全部地區') {\n      showData.push(item)\n    }\n  })\n  render(showData)\n}\n//撈資料\nfunction getdata() {\n\n  axios.get('https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json')\n    .then(function (response) {\n      sideSeedata = response.data.data;\n\n\n      render(sideSeedata);\n\n      //data=response.data[0].data;\n\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n}\n\n\nfunction render(data) {\n\n  showDataNum(data);\n  showData(data);\n  pieChart()\n}\nfunction pieChart() {\n  //先取得area所有資料\n  let areaString = [];\n  sideSeedata.forEach((item) => {\n    if (areaString.indexOf(item.area) === -1) {\n      areaString.push(item.area)\n    }\n  })\n  //把area轉為屬性\n  const areaObj = {};\n  areaString.forEach((item) => {\n    areaObj[item] = 0\n  })\n  //計算資料的area數量並存放到areaObj\n  sideSeedata.forEach((item) => {\n    areaObj[item.area]++\n  })\n  //整理成畫圖需要的格式\n  let areaData = [];\n  areaString.forEach((item) => {\n    areaData.push([item, areaObj[item]])\n  })\n\n  //畫成圓餅圖\n  const chart = c3.generate({\n    bindto: '#donutChart',\n    data: {\n      // iris data from R\n      columns: areaData,\n      type: 'donut',\n    },\n    size: {\n      height: 250,\n      width: 350\n    },\n    donut: {\n      title: \"套票地區比重\"\n    }\n  });\n}\n\n//套件\n//VALIDATE.JS\n//限制條件\nfunction errorDisplay() {\n  const constraints = {\n    ticketName: {\n      presence: { message: \"必填欄位\" },\n    },\n    ticketPictureUrl: {\n      presence: { message: \"必填欄位\" },\n      url: {\n        schemes: [\"http\", \"https\"],\n        message: \"必須是正確的網址\"\n      }\n    },\n    location: {\n      presence: { message: \"必填欄位\" },\n    },\n    ticketPrice: {\n      presence: { message: \"必填欄位\" },\n      numericality: {\n        onlyInteger: true,\n        greaterThan: 0,\n        notInteger: \"請填入整數\",\n        notGreaterThan: \"請填入大於0的整數\"\n      }\n    },\n    ticketNum: {\n      presence: { message: \"必填欄位\" },\n      numericality: {\n        onlyInteger: true,\n        greaterThan: 0,\n        notInteger: \"請填入整數\",\n        notGreaterThan: \"請填入大於0的整數\"\n      }\n    },\n    ticketRank: {\n      presence: { message: \"必填欄位\" },\n      numericality: {\n        onlyInteger: true,\n        greaterThan: 0,\n        lessThanOrEqualTo: 5,\n        notInteger: \"請填入整數\",\n        notGreaterThan: \"請填入大於0的整數\",\n        notLessThanOrEqualTo: \"請填入小於等於5的整數\"\n      }\n    },\n    ticketDisctipt: {\n      presence: { message: \"必填欄位\" },\n      length: {\n        maximum: 100,\n        tooLong: \"不可超過100字\"\n      }\n    }\n  }\n  let errors = validate(inputfrom, constraints);\n\n  console.log(errors);\n\n  //把錯誤訊息顯示出來有錯誤時是顯示空值\n\n  errerMessage.forEach((item, index) => {\n    let classString = item.getAttribute('class');\n    //console.log(classString)\n    let classStringArray = classString.split(' ');\n    if (errors) {\n      //console.log(classStringArray[0])\n      if (Object.keys(errors).indexOf(classStringArray[0]) !== -1) {\n        errerMessage[index].textContent = errors[classStringArray[0]]\n      };\n    }\n    else{\n      errerMessage[index].textContent = '';\n    }\n  });\n  //回傳errors作為要不要reset的判斷依據\n  return errors\n  //console.log(errerMessage);\n}\n\n\n//直接執行\ngetdata();\n\n//監聽\ninputClick.addEventListener('click', getUserInfo, false);\nselectLocation.addEventListener('change', displaySelectionLocation, false);"]}